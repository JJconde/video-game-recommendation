<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Homepage - Top Video Games</title>

    <!-- Bootstrap Core CSS -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../static/css/games-homepage.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="..">
                    <big>Top Games 4 Me</big>
                </a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="..">About</a>
                    </li>
                    <li>
                        <a href="../all_games">All Games</a>
                    </li>
                    <li>
                        <a href="..">Contact Info</a>
                    </li>
<!--                     <li>
                      <form class="form-signin">
                        <label for="inputEmail" class="sr-only">username</label>
                        <input type="email" id="inputEmail" class="form-control" placeholder="username" required autofocus>
                        <label for="inputPassword" class="sr-only">password</label>
                        <input type="password" id="inputPassword" class="form-control" placeholder="password" required>
                        <div class="checkbox">
                          <label>
                            <input type="checkbox" value="remember-me"> Remember me
                          </label>
                        </div>
                        <button class="btn btn-sm btn-primary btn-block" type="submit">Sign in</button>
                      </form>
                    </li> -->
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Content -->
    <div class="container">

        <div class="row">

            <div class="col-md-3">
                <p class="lead">Steam PC Games</p>
                <div class="list-group">
                    {% for tag in TAGS %}
                        {% set tag_href = "../tags/" + tag.replace(' ', '%20') %}
                        <a href={{ tag_href }} class="list-group-item">{{ tag }}</a>
                    {% endfor %}
<!--                     <a href="#" class="list-group-item">Adventure</a>
                    <a href="#" class="list-group-item">FPS</a>
                    <a href="#" class="list-group-item">RPG</a>
                    <a href="#" class="list-group-item">Strategy</a>
                    <a href="#" class="list-group-item">Multiplayer</a> -->
                </div>
            </div>

            <div class="col-md-9" align="middle">

                <form class="navbar-form" action="/search" method=post>
                    <div class="form-group">
                        <input type="text" name="search" class="form-control" placeholder="Search" value="{{ request.form.search }}" style="width:480px;">
                    </div>
                    <button type="submit" class="btn btn-default">
                        <i class="glyphicon glyphicon-search" style="color:#222"></i>
                    </button>
                </form>

            </div>

            <div class="col-md-9">
                {% if not TYPE %}
                <div class="row carousel-holder">
                    <div class="col-md-12">
                        <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                            <ol class="carousel-indicators">
                                <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                                <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                            </ol>
                            <div class="carousel-inner">
                                <div class="item active">
                                    <img class="slide-image" src="../static/images/landing_1.jpg" alt="">
                                </div>
                                <div class="item">
                                    <img class="slide-image" src="../static/images/landing_2.jpg" alt="">
                                </div>
                            </div>
                            <a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">
                                <span class="glyphicon glyphicon-chevron-left"></span>
                            </a>
                            <a class="right carousel-control" href="#carousel-example-generic" data-slide="next">
                                <span class="glyphicon glyphicon-chevron-right"></span>
                            </a>
                        </div>
                    </div>
                </div>
                {% endif %}

                <div class="list-group">
                    <h4 align="middle" style="background-color:#222;color:white;" class="list-group-item">
                        {% if TYPE %}
                        Recommended Top Games
                        {% else %}
                        Most Popular Games
                        {% endif %}
                    </h4>
                </div>
            </div>

            <div class="col-md-9">
                <div id="myCarousel" class="carousel slide">
                  <!-- Carousel items -->
                  <div class="carousel-inner">
                {% for game in DATA %}
                    {% set img_type = game['game_link'].split('/') %}
                    {% set img_url = "../static/images/" + img_type[3] + "_" + img_type[4] + ".jpg" %}
                    {% set game_url = game['game_link'] %}

                    {% if (loop.index - 1) == 0 %}
                    <div class="active item">
                    {% elif (loop.index - 1) is divisibleby 6 * (TYPE|int + 1) %}
                    </div>
                    <div class="item">
                    {% endif %}
                    <div class="col-sm-4 col-lg-4 col-md-4">
                        <div class="thumbnail">
                            <a href={{ game_url }}>
                                <img src={{ img_url }}>
                                <p style="position:absolute;top:5.8em;right:1em;font-weight:bold;color:darkgreen;font-size:larger;background-color:white">{{ game['game_discount'] }}
                                </p>
                            </a>
                            <div class="caption">
                                <h5 class="pull-right">{{ game['game_price'] }}</h5>
                                <h5><a href={{ game_url }}>{{ game['game_name'] }}</a>
                                </h5>
<!--                                     {% for tag in game['game_tags'] %}
                                <a style="background-color:gray;color:white;font-size:smaller;font-family:monospace;">{{ tag.title() }}</a>
                                {% endfor %} -->
                                <p>{{ ', '.join(game['game_tags']).title() }}</p>
                            </div>
                            <div class="ratings">
                                <p class="pull-right">{{ game['total_user_reviews']|int }} reviews</p>
                                <p>
                                    {% for i in range(game['avg_user_reviews']|int + 1) %}
                                    <span class="glyphicon glyphicon-star"></span>
                                    {% endfor %}
                                </p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
                    </div>
                  </div>
                  <!-- Carousel nav -->
                  <a class="carousel-control left" href="#myCarousel" data-slide="prev" style="position:fixed;">&lsaquo;</a>
                  <a class="carousel-control right" href="#myCarousel" data-slide="next" style="position:fixed;">&rsaquo;</a>
                </div>

                <div align="middle">
                    <!-- LINKED NAV -->
                    <ol class="carousel-linked-nav pagination">
                    {% for game in DATA %}
                        {% set count = (((loop.index - 1) / (6 * (TYPE|int + 1))) + 1)|int %}
                        {% set count_href = "#" + count|string %}

                        {% if (loop.index - 1) == 0 %}
                        <li class="active"><a href={{ count_href }}>{{ count }}</a></li>
                        {% elif (loop.index - 1) is divisibleby (6 * (TYPE|int + 1)) %}
                        <li><a href={{ count_href }}>{{ count }}</a></li>
                        {% endif %}
                    {% endfor %}
                    </ol>
                </div>

            </div>
        </div>
    </div>
    <!-- /.container

    <div class="container">

        <hr>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>Copyright &copy; TopGames4.me 2015</p>
                </div>
            </div>
        </footer>

    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="../static/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../static/js/bootstrap.min.js"></script>

    <script>
    // invoke the carousel
    $('#myCarousel').carousel({
        pause: true,
        interval: false
    });

    /* SLIDE ON CLICK */ 

    $('.carousel-linked-nav > li > a').click(function() {

        // grab href, remove pound sign, convert to number
        var item = Number($(this).attr('href').substring(1));

        // slide to number -1 (account for zero indexing)
        $('#myCarousel').carousel(item - 1);

        // remove current active class
        $('.carousel-linked-nav .active').removeClass('active');

        // add active class to just clicked on item
        $(this).parent().addClass('active');

        // don't follow the link
        return false;
    });

    /* AUTOPLAY NAV HIGHLIGHT */

    // bind 'slid' function
    $('#myCarousel').bind('slid', function() {

        // remove active class
        $('.carousel-linked-nav .active').removeClass('active');

        // get index of currently active item
        var idx = $('#myCarousel .item.active').index();

        // select currently active item and add active class
        $('.carousel-linked-nav li:eq(' + idx + ')').addClass('active');

    });
    </script>

</body>

</html>
